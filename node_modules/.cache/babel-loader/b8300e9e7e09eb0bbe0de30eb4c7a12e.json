{"ast":null,"code":"import _classCallCheck from\"E:/StreamTest3/test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"E:/StreamTest3/test/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"E:/StreamTest3/test/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"E:/StreamTest3/test/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{OTSession,OTPublisher,OTStreams,OTSubscriber}from'opentok-react';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.onSessionError=function(error){_this.setState({error:error});};_this.onPublish=function(){console.log('Publish Success');};_this.onPublishError=function(error){_this.setState({error:error});};_this.onSubscribe=function(){console.log('Subscribe Success');};_this.onSubscribeError=function(error){_this.setState({error:error});};_this.toggleVideo=function(){_this.setState(function(state){return{publishVideo:!state.publishVideo};});};_this.state={error:null,connection:'Connecting',publishVideo:true};_this.sessionEventHandlers={sessionConnected:function sessionConnected(){_this.setState({connection:'Connected'});},sessionDisconnected:function sessionDisconnected(){_this.setState({connection:'Disconnected'});},sessionReconnected:function sessionReconnected(){_this.setState({connection:'Reconnected'});},sessionReconnecting:function sessionReconnecting(){_this.setState({connection:'Reconnecting'});}};_this.publisherEventHandlers={accessDenied:function accessDenied(){console.log('User denied access to media source');},streamCreated:function streamCreated(){console.log('Publisher stream created');},streamDestroyed:function streamDestroyed(_ref){var reason=_ref.reason;console.log(\"Publisher stream destroyed because: \".concat(reason));}};_this.subscriberEventHandlers={videoEnabled:function videoEnabled(){console.log('Subscriber video enabled');},videoDisabled:function videoDisabled(){console.log('Subscriber video disabled');}};return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this$props$credentia=this.props.credentials,apiKey=_this$props$credentia.apiKey,sessionId=_this$props$credentia.sessionId,token=_this$props$credentia.token;var _this$state=this.state,error=_this$state.error,connection=_this$state.connection,publishVideo=_this$state.publishVideo;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"sessionStatus\",children:[\"Session Status: \",connection]}),error?/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error]}):null,/*#__PURE__*/_jsxs(OTSession,{apiKey:apiKey,sessionId:sessionId,token:token,onError:this.onSessionError,eventHandlers:this.sessionEventHandlers,children:[/*#__PURE__*/_jsxs(\"button\",{id:\"videoButton\",onClick:this.toggleVideo,children:[publishVideo?'Disable':'Enable',\" Video\"]}),/*#__PURE__*/_jsx(OTPublisher,{properties:{publishVideo:publishVideo,width:50,height:50},onPublish:this.onPublish,onError:this.onPublishError,eventHandlers:this.publisherEventHandlers}),/*#__PURE__*/_jsx(OTStreams,{children:/*#__PURE__*/_jsx(OTSubscriber,{properties:{width:100,height:100},onSubscribe:this.onSubscribe,onError:this.onSubscribeError,eventHandlers:this.subscriberEventHandlers})})]})]});}}]);return App;}(React.Component);export{App as default};","map":{"version":3,"sources":["E:/StreamTest3/test/src/App.js"],"names":["React","OTSession","OTPublisher","OTStreams","OTSubscriber","App","props","onSessionError","error","setState","onPublish","console","log","onPublishError","onSubscribe","onSubscribeError","toggleVideo","state","publishVideo","connection","sessionEventHandlers","sessionConnected","sessionDisconnected","sessionReconnected","sessionReconnecting","publisherEventHandlers","accessDenied","streamCreated","streamDestroyed","reason","subscriberEventHandlers","videoEnabled","videoDisabled","credentials","apiKey","sessionId","token","width","height","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { OTSession, OTPublisher, OTStreams, OTSubscriber } from 'opentok-react';\n\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: null,\n      connection: 'Connecting',\n      publishVideo: true,\n    };\n\n    this.sessionEventHandlers = {\n      sessionConnected: () => {\n        this.setState({ connection: 'Connected' });\n      },\n      sessionDisconnected: () => {\n        this.setState({ connection: 'Disconnected' });\n      },\n      sessionReconnected: () => {\n        this.setState({ connection: 'Reconnected' });\n      },\n      sessionReconnecting: () => {\n        this.setState({ connection: 'Reconnecting' });\n      },\n    };\n\n    this.publisherEventHandlers = {\n      accessDenied: () => {\n        console.log('User denied access to media source');\n      },\n      streamCreated: () => {\n        console.log('Publisher stream created');\n      },\n      streamDestroyed: ({ reason }) => {\n        console.log(`Publisher stream destroyed because: ${reason}`);\n      },\n    };\n\n    this.subscriberEventHandlers = {\n      videoEnabled: () => {\n        console.log('Subscriber video enabled');\n      },\n      videoDisabled: () => {\n        console.log('Subscriber video disabled');\n      },\n    };\n  }\n\n  onSessionError = error => {\n    this.setState({ error });\n  };\n\n  onPublish = () => {\n    console.log('Publish Success');\n  };\n\n  onPublishError = error => {\n    this.setState({ error });\n  };\n\n  onSubscribe = () => {\n    console.log('Subscribe Success');\n  };\n\n  onSubscribeError = error => {\n    this.setState({ error });\n  };\n\n  toggleVideo = () => {\n    this.setState(state => ({\n      publishVideo: !state.publishVideo,\n    }));\n  };\n\n  render() {\n    const { apiKey, sessionId, token } = this.props.credentials;\n    const { error, connection, publishVideo } = this.state;\n    return (\n      <div>\n        <div id=\"sessionStatus\">Session Status: {connection}</div>\n        {error ? (\n          <div className=\"error\">\n            <strong>Error:</strong> {error}\n          </div>\n        ) : null}\n        <OTSession\n          apiKey={apiKey}\n          sessionId={sessionId}\n          token={token}\n          onError={this.onSessionError}\n          eventHandlers={this.sessionEventHandlers}\n        >\n          <button id=\"videoButton\" onClick={this.toggleVideo}>\n            {publishVideo ? 'Disable' : 'Enable'} Video\n          </button>\n          <OTPublisher\n            properties={{ publishVideo, width: 50, height: 50, }}\n            onPublish={this.onPublish}\n            onError={this.onPublishError}\n            eventHandlers={this.publisherEventHandlers}\n          />\n          <OTStreams>\n            <OTSubscriber\n              properties={{ width: 100, height: 100 }}\n              onSubscribe={this.onSubscribe}\n              onError={this.onSubscribeError}\n              eventHandlers={this.subscriberEventHandlers}\n            />\n          </OTStreams>\n        </OTSession>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}